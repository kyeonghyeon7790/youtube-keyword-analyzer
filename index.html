<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>YouTube í‚¤ì›Œë“œ ë¶„ì„ ë„êµ¬</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
           background: linear-gradient(135deg,#FF0000 0%,#CC0000 100%); min-height: 100vh; padding: 20px; }
    .container { max-width: 1100px; margin: 0 auto; }
    .card { background:#fff; border-radius: 16px; padding: 24px; box-shadow: 0 12px 36px rgba(0,0,0,.2); }
    .search { display: flex; gap: 10px; margin-bottom: 12px; }
    .search input { flex: 1; padding: 14px; border: 2px solid #eee; border-radius: 12px; font-size: 16px; }
    .search button { padding: 14px 22px; border: 0; border-radius: 12px; cursor: pointer; color: #fff;
                     background: linear-gradient(135deg,#FF0000 0%,#CC0000 100%); font-weight: 700; }
    .error { display:none; margin-top:10px; background:#ffe6e6; color:#b00000; border-left:4px solid #b00000; padding:12px; border-radius:8px; }
    .error.active { display:block; }
    .loading { display:none; margin-top:10px; color:#fff; }
    .loading.active { display:block; }
    .result { display:none; margin-top:16px; }
    .result.active { display:block; }
    .result h3 { color:#fff; margin-bottom:8px; }
    .panel { background:#f8f9fa; padding:16px; border-radius:12px; white-space:pre-wrap; line-height:1.8; border-left:4px solid #FF0000; }
  </style>
</head>
<body>
  <div class="container">
    <h1 style="color:#fff; margin-bottom:16px;">ğŸ” YouTube í‚¤ì›Œë“œ ë¶„ì„ ë„êµ¬</h1>
    <div class="card">
      <div class="search">
        <input id="q" placeholder="ì˜ˆ: í†µê¸°íƒ€ ë°œë¼ë“œ, íŠ¸ë¡œíŠ¸ ì»¤ë²„, ìš´ë™ ë£¨í‹´" />
        <button id="go">ë¶„ì„</button>
      </div>
      <div id="err" class="error"></div>
      <div id="load" class="loading">ìœ íŠœë¸Œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</div>
      <div id="res" class="result">
        <h3>ğŸ“Š ë¶„ì„ ê²°ê³¼</h3>
        <div id="out" class="panel"></div>
      </div>
    </div>
  </div>

  <script>
    const KEY = "YOUR_YT_API_KEY"; // â† ë³¸ì¸ í‚¤ ì…ë ¥
    const el = id => document.getElementById(id);
    el('go').addEventListener('click', run);
    el('q').addEventListener('keypress', e => { if (e.key === 'Enter') run(); });

    async function run(){
      const q = el('q').value.trim();
      hide('res'); hide('err'); show('load');
      if(!q){ return showError('í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.'); }
      try{
        const search = await ytSearch(q);
        if(!search.items?.length){ return showError('ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.'); }
        const ids = search.items.map(v=>v.id.videoId).filter(Boolean).slice(0,25);
        const videos = await ytVideos(ids);

        const totalViews = videos.items.reduce((s,v)=>s + Number(v.statistics?.viewCount||0), 0);
        const avg = Math.round(totalViews / videos.items.length || 0);
        const trends = inferTrends(videos.items);

        const text = [
          `ìˆ˜ì§‘ ì˜ìƒ ìˆ˜: ${videos.items.length.toLocaleString()}`,
          `ì´ ì¡°íšŒìˆ˜(í‘œë³¸): ${totalViews.toLocaleString()}`,
          `í‰ê·  ì¡°íšŒìˆ˜: ${avg.toLocaleString()}`,
          '',
          'íŠ¸ë Œë“œ:',
          ...trends.map(t => '- ' + t)
        ].join('\\n');

        el('out').textContent = text;
        show('res');
      }catch(e){
        console.error(e);
        showError('ìš”ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }finally{
        hide('load');
      }
    }

    async function ytSearch(q){
      const u = new URL('https://www.googleapis.com/youtube/v3/search');
      u.search = new URLSearchParams({ part:'snippet', q, key:KEY, type:'video', maxResults:'25', regionCode:'KR', relevanceLanguage:'ko' });
      const r = await fetch(u); if(!r.ok) throw new Error('search failed'); return r.json();
    }
    async function ytVideos(ids){
      const u = new URL('https://www.googleapis.com/youtube/v3/videos');
      u.search = new URLSearchParams({ part:'snippet,contentDetails,statistics', id: ids.join(','), key: KEY });
      const r = await fetch(u); if(!r.ok) throw new Error('videos failed'); return r.json();
    }
    function inferTrends(items){
      const titles = items.map(v => (v.snippet.title + ' ' + v.snippet.description).toLowerCase());
      const hints = [];
      if(titles.some(t=>/shorts|ì‡¼ì¸ /.test(t))) hints.push('ì‡¼ì¸  í™œìš© ì¦ê°€');
      if(titles.some(t=>/cover|ì»¤ë²„|ë¼ì´ë¸Œ/.test(t))) hints.push('ì»¤ë²„/ë¼ì´ë¸Œ í¬ë§· ê°•ì„¸');
      if(hints.length===0) hints.push('íŠœí† ë¦¬ì–¼/í•˜ì´ë¼ì´íŠ¸ í˜¼í•©í˜•');
      return hints;
    }
    function show(id){ el(id).classList.add('result','active'); }
    function hide(id){ el(id).classList.remove('active'); }
    function showError(m){ el('err').textContent = 'âš ï¸ ' + m; el('err').classList.add('active'); hide('load'); }
  </script>
</body>
</html>